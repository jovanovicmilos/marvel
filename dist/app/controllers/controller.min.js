app.controller("marvelController",["$scope","$http","$timeout","sessionService",function(a,o,r,s){a.searchModal=function(){$("#search-modal").modal("show")},a.bookmark=!1,a.marvelfilter={nameStartsWith:null,limit:12,offset:0,ts:1,apikey:"39579f1cdfa1134cf33d669bb5176e39",hash:"c4d6f0fac656003bf2f2081b2a8fcc3e"},$(".loader").hide(),a.errormsg=!1,a.getHeroes=function(r){a.marvelfilter.offset=12*(a.currentPage-1),$(".loader").show();var t;t=JSON.parse(s.get("myheroes")),""==a.marvelfilter.nameStartsWith&&(a.marvelfilter.nameStartsWith=null);var e={method:"GET",url:"https://gateway.marvel.com/v1/public/characters",params:a.marvelfilter};o(e).then(function(e){1==r?(a.bookmark=!0,a.heroes=e.data.data):a.marvelfilter.nameStartsWith||null==t||0==t.length?(a.bookmark=!0,a.heroes=e.data.data):(a.bookmark=!1,a.heroes={results:[]},a.heroes.results=t,a.heroes.total=t.length),$(".loader").hide()},function(e){alert(e.data.message)})},a.getHeroes(!1),a.toggleHeroList=function(e){0==a.selected.length&&(a.errormsg=!0,r(function(){a.errormsg=!1},3e3)),0==e&&(a.marvelfilter.nameStartsWith=null),a.getHeroes(e)},a.selected=[],a.toggle=function(e,r){var t=(r=null==s.get("myheroes")?r:JSON.parse(s.get("myheroes"))).indexOf(e);-1<t?r.splice(t,1):r.push(e),s.set("myheroes",JSON.stringify(r)),a.selected=JSON.parse(s.get("myheroes"))},a.unCheckHero=function(e){for(var r=JSON.parse(s.get("myheroes")),t=0;t<r.length;t++)r[t].id==e.id&&(r.splice(t,1),a.selected=r,s.set("myheroes",JSON.stringify(r)),a.getHeroes(a.bookmark))},a.existID=function(e){var r=JSON.parse(s.get("myheroes"));if(null!==r)for(var t=0;t<r.length;t++)if(r[t].id==e)return!0},a.currentPage=1,a.maxSize=3}]);